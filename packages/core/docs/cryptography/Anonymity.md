
**Anonymity Definition** is the state of being not identifiable within a set of subjects, the anonymity set. A sender is identifiable when we get information that can be linked to them, e.g., the IP address of the machine the sender is using.

In order to achieve a good level of anonymity, an attacker should not be able to obtain probabilistic relations between input and output of a mix and thus narrowing down the set of possible senders (recipients) of a message. So before applying any anonymity metrics, the power of the attacker should be specified. The traffic load should also be taken into consideration when measuring anonymity.

### Degree of anonymity
The anonymity degree is measured with respect to a particular attack: the results obtained for a system are no longer valid if the attack model changes. Concrete assumptions about the attacker have to be clearly specified when measuring the degree of anonymity. 

Let `N` be the number of mix nodes (size of anonymity set) in our system which is the same as the set of **senders** and **recipients** (since the sender can also be the recipient and is represented as a mix node) and ![formula](https://render.githubusercontent.com/render/math?math=\gamma) be the probabilistic information the attacker obtains about them with probability `P`.
The maximum degree of anonymity is achieved when an attacker sees all nodes in the anonymity set indistinguishable from the originator of a message. Therefore, the degree of anonymity depends on **the distribution of probabilities** and not on the size of the anonymity set. This way, we are able to measure the quality of the system with respect to the anonymity it provides, independently from the number of users who are actually using it. 
In [this](https://www.esat.kuleuven.be/cosic/publications/article-89.pdf) paper, the degree of anonymity is computed as follow:

- Let `H(X)` be the entropy of the network after the attack has taken place where `X` is the discrete random variable with probability <img src="https://render.githubusercontent.com/render/math?math=p_i=P_r(X=i)">  where `i` represents each possible value `X` might take. 
<img src="https://render.githubusercontent.com/render/math?math=H(X)=-\sum_{i=1}^{N}p_ilog_2(p_i)"> 

- Let `H_M` be the maximum entropy where `N` in the set of all honest nodes in the network such that:
<img src="https://render.githubusercontent.com/render/math?math=H_M=log_2(N)">
The degree is computed as:  

![formula](https://render.githubusercontent.com/render/math?math=d=1-\frac{H_M-H(X)}{H_M}=\frac{H(X)}{H_M})
The degree of anonymity `d`  quantifies the amount of information the system is leaking where 
<img src="https://render.githubusercontent.com/render/math?math=0\leq d\leq 1">
When `d=1` the attacker cannot distinguish the sender from any other node and all will have same probability <img src="https://render.githubusercontent.com/render/math?math=p_i=\frac{1}{N}">

### Minimum adequate degree of anonymity
- Let `C` be the number of malicious nodes controlled an attacker in the network which means 
<img src="https://render.githubusercontent.com/render/math?math=H_M=log_2(N-C)">
- What is the maximum number of colluding nodes (malicious) a system can tolerate?



### Identify attack models:
We can identify two types of adversaries: passive and active ones. The first type only observes what happens in the network and collecting that information while the second type actively attacks the network and modify information. Some attacks on mixnets are explained in [this paper](https://www.freehaven.net/anonbib/cache/trickle02.pdf) and from which we define the following ones:
1. Flooding attacks:
2. traffic analysis
3. Blending
4. n-1 attacks

### Generalized anonymity degree 
When studying each attack scenario, we can propose a general measurement model to quantify the degree of anonymity provided by a system in particular attack circumstances. This degree can be generalized to include several attack possibilities as follows:

![formula](https://render.githubusercontent.com/render/math?math=d=\sum_{j=1}^{K}p_jd_j)
where `d_j` is the degree obtained under a particular attack scenario, `p_j` is the probability of occurrence of such attack and `K` is the number of different possibilities.

### Measure mixnet anonymity in the presence of Cover Traffic
A cover traffic message is a fake message introduced in a mix network in order to make it more difficult for an attacker to deploy passive and active attacks. Those messages are normally generated by the mixes (although users may also generate them, which increases the anonymity level of the mix
network and prevents end-to-end intersection attacks.
It is very important to answer these questions in order to be able to measure anonymity:
- Mix model (continuous, Pool or generalized mix model)
- Network topology (cascade, free route or stratified)
- Average number of cover traffic to be generated per round.
- Cover Traffic distribution (binomial, uniform, geometrical, etc.) 
- Route length and path selection of Cover Traffic.

### Tradeoffs
The generation and transmission of cover traffic has a cost, and it is therefore very important to find the right balance on the number of traffic that should be created in a mix network. 
Check following papers:
-  [TAXONOMY OF MIXES AND DUMMY TRAFFIC](https://www.freehaven.net/anonbib/cache/taxonomy-dummy.pdf) 
- [Towards measuring anonymity](https://www.esat.kuleuven.be/cosic/publications/article-89.pdf)
- [From a Trickle to a Flood: Active Attacks on Several Mix Types](https://www.freehaven.net/anonbib/cache/trickle02.pdf)
- [Anonymity, Unobservability, and Pseudonymity](https://www.researchgate.net/publication/221331797_Anonymity_Unobservability_and_Pseudonymity_-_A_Proposal_for_Terminology)
- [Measuring Relationship Anonymity in Mix Networks](https://www.cs.cornell.edu/~shmat/shmat_wpes06.pdf)
- [Towards an information theoretic metric for anonymity](http://www0.cs.ucl.ac.uk/staff/G.Danezis/papers/set.pdf)
